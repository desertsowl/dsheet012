<%- include('./head') %>
<body>
    <%- include('./header') %>

    <main class="container my-4">
        <h1 class="mb-4"><%= title %></h1>

        <!-- フォーム -->
        <form action="/manager/sheet/<%= id_sheet %>/save" method="POST" enctype="multipart/form-data">
            <div class="mb-3">
                <label for="itemNumber" class="form-label">項番</label>
                <div class="input-group">
                    <input type="number" id="itemNumber" name="itemNumber" class="form-control" value="<%= nextItemNumber %>" min="1" required>
                    <button type="button" class="btn btn-outline-secondary" id="incrementButton">上</button>
                    <button type="button" class="btn btn-outline-secondary" id="decrementButton">下</button>
                </div>
            </div>

            <div class="mb-3">
                <label for="itemName" class="form-label">項目</label>
                <input type="text" id="itemName" name="itemName" class="form-control" placeholder="項目名を入力" required>
            </div>

            <div class="mb-3">
                <label for="workContent" class="form-label">内容</label>
                <textarea id="workContent" name="workContent" class="form-control" rows="3" placeholder="作業内容を入力" required></textarea>
            </div>

            <div class="mb-3">
                <label for="details" class="form-label">詳細</label>
                <textarea id="details" name="details" class="form-control" rows="3" placeholder="パラメータなどの詳細を入力" required></textarea>
            </div>

            <div class="mb-3">
                <label for="image" class="form-label">画像</label>
                <input type="file" id="image" name="image" class="form-control" accept="image/*">
            </div>

            <button type="submit" class="btn btn-primary">保存</button>
            <a href="/manager/sheet/<%= id_sheet %>/read" class="btn btn-secondary">戻る</a>
        </form>
    </main>

    <%- include('./footer') %>

    <!-- JavaScript -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const incrementButton = document.getElementById("incrementButton");
            const decrementButton = document.getElementById("decrementButton");
            const itemNumberInput = document.getElementById("itemNumber");

            incrementButton.addEventListener("click", function () {
                itemNumberInput.value = parseInt(itemNumberInput.value) + 1 || 1;
            });

            decrementButton.addEventListener("click", function () {
                const currentValue = parseInt(itemNumberInput.value) || 1;
                itemNumberInput.value = currentValue > 1 ? currentValue - 1 : 1;
            });
        });
    </script>
</body>
</html>
